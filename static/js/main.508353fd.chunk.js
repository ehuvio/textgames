(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{22:function(t,e,a){t.exports=a(35)},27:function(t,e,a){},35:function(t,e,a){"use strict";a.r(e);var n=a(0),u=a.n(n),r=a(17),s=a.n(r),o=(a(27),a(5)),i=a(6),l=a(9),c=a(7),d=a(10),m=a(8),p=a(11),h={azureStatuses:[],datadogStatuses:[]};var f=Object(p.b)(function(t,e){return t?"GOT_NEW_DATADOG_STATUS"===e.type?Object.assign({},t,{datadogStatuses:e.data}):"GOT_NEW_AZURE_STATUS"===e.type?Object.assign({},t,{azureStatuses:e.data}):t:h}),E=function(t){return{type:"GOT_NEW_DATADOG_STATUS",data:t}},S=function(t){return{type:"GOT_NEW_AZURE_STATUS",data:t}},g=a(37),v=a(36),b=a(39),O=a(38);function y(t,e,a,n){return new Promise(function(u,r){var s=new XMLHttpRequest;if(s.onreadystatechange=function(){if(4===s.readyState)if(s.status>=200&&s.status<300)try{var t=JSON.parse(s.responseText);u(t,s)}catch(e){u(s)}else r(s)},s.open(e,t,!0),n)for(var o in n)s.setRequestHeader(o,n[o]);s.send(a?JSON.stringify(a):null)})}var j={azureLocs:["East US","East US 2","North Europe"],azureLocRegex:["(?!.*(East US 2)).*East US*","East US 2","North Europe"],interval:6e5,initDatadog:function(t){this.dataDogStatuses||(this.getDatadogStatus(t),setInterval(this.getDatadogStatus.bind(this),this.interval))},initAzure:function(t){this.azureStatuses||(this.getAzureStatus(t),setInterval(this.getAzureStatus.bind(this),this.interval))},getDatadogStatus:function(t){var e=this;y("https://status.datadoghq.com/index.json","get",null,{accept:"application/json","content-type":"application/json"}).then(function(t){e.dataDogStatuses=[];var a=0,n=!0,u=!1,r=void 0;try{for(var s,o=t.components[Symbol.iterator]();!(n=(s=o.next()).done);n=!0){var i=s.value;"Alerting Engine"!==i.name&&"Event Pipeline"!==i.name||(e.dataDogStatuses.push({name:i.name,status:i.status,id:a}),a++)}}catch(l){u=!0,r=l}finally{try{n||null==o.return||o.return()}finally{if(u)throw r}}f.dispatch(E(e.dataDogStatuses))})},getAzureStatus:function(t){var e=this;y("https://azurecomcdn.azureedge.net/en-us/status/feed/","get",null,null).then(function(t){e.azureStatuses=[];for(var a=(new DOMParser).parseFromString(t.response,"text/xml").querySelectorAll("item"),n=0;n<e.azureLocs.length;n++){for(var u="OK",r="OK",s="OK",o=e.azureLocs[n],i=new RegExp(e.azureLocRegex[n]),l=0;l<a.length;l++){var c=a[l].getElementsByTagName("title")[0].childNodes[0].nodeValue,d=a[l].getElementsByTagName("description")[0].childNodes[0].nodeValue,m=i.test(d),p=i.test(d);if(m||p){var h=new RegExp("Virtual Machines");u=h.test(c)||h.test(d)?"NOK":"OK",r=(h=new RegExp("Cloud Cervices")).test(c)||h.test(d)?"NOK":"OK",s=(h=new RegExp("Functions")).test(c)||h.test(d)?"NOK":"OK"}}e.azureStatuses.push({location:o,virtualStatus:u,cloudStatus:r,functionStatus:s,id:n})}f.dispatch(S(e.azureStatuses))})}};var z=function(t){var e=t.name,a=t.status;return u.a.createElement("tr",null,u.a.createElement("td",null,e),u.a.createElement("td",{style:function(t){return{color:"operational"===t?"green":"red"}}(a)},a))},w=function(t){function e(){return Object(o.a)(this,e),Object(l.a)(this,Object(c.a)(e).apply(this,arguments))}return Object(d.a)(e,t),Object(i.a)(e,[{key:"componentDidMount",value:function(){this.unsubscibe=f.subscribe(function(){return console.log(f.getState())}),j.initDatadog()}},{key:"componentWillUnmount",value:function(){this.unsubscibe()}},{key:"render",value:function(){var t=this.props.statuses.map(function(t,e){return u.a.createElement(z,{key:t.id,name:t.name,status:t.status})});return u.a.createElement("div",null,u.a.createElement("table",null,u.a.createElement("tbody",null,t)))}}]),e}(u.a.Component),D=Object(m.b)(function(t){return{statuses:t.datadogStatuses}})(w),A=function(t){var e=t.location,a=t.virtualStatus,n=t.cloudStatus,r=t.functionStatus;return u.a.createElement("tr",null,u.a.createElement("td",null,e),u.a.createElement("td",null,"Virtual Machines : ",u.a.createElement("div",{style:T(a)},"OK")),u.a.createElement("td",null,"Cloud Cervices : ",u.a.createElement("div",{style:T(n)},"OK")),u.a.createElement("td",null,"Functions : ",u.a.createElement("div",{style:T(r)},"OK")))};function T(t){return{color:"OK"===t?"green":"red"}}var k=function(t){function e(){return Object(o.a)(this,e),Object(l.a)(this,Object(c.a)(e).apply(this,arguments))}return Object(d.a)(e,t),Object(i.a)(e,[{key:"componentDidMount",value:function(){this.unsubscibe=f.subscribe(function(){return console.log(f.getState())}),j.initAzure()}},{key:"componentWillUnmount",value:function(){this.unsubscibe()}},{key:"render",value:function(){var t=this.props.statuses.map(function(t){return u.a.createElement(A,{key:t.id,location:t.location,virtualStatus:t.virtualStatus,cloudStatus:t.cloudStatus,functionStatus:t.functionStatus})});return u.a.createElement("div",null,u.a.createElement("table",null,u.a.createElement("tbody",null,t)))}}]),e}(u.a.Component),N=Object(m.b)(function(t){return{statuses:t.azureStatuses}})(k),x=function(t){function e(){return Object(o.a)(this,e),Object(l.a)(this,Object(c.a)(e).apply(this,arguments))}return Object(d.a)(e,t),Object(i.a)(e,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return u.a.createElement(m.a,{store:f},u.a.createElement(g.a,null,u.a.createElement("div",null,u.a.createElement("header",null,u.a.createElement("h1",null,"Service Status Check")),u.a.createElement("nav",null,u.a.createElement(v.a,{to:"/datadog"},"DataDog"),u.a.createElement(v.a,{to:"/azure"},"Azure")),u.a.createElement("main",null,u.a.createElement(b.a,null,u.a.createElement(O.a,{exact:!0,path:"/",component:D}),u.a.createElement(O.a,{path:"/datadog",component:D}),u.a.createElement(O.a,{path:"/azure",component:N}))),u.a.createElement("footer",null,u.a.createElement("br",null),"Copyright (c) Eetu Solutions Ltd"))))}}]),e}(u.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(u.a.createElement(x,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(t){t.unregister()})}},[[22,2,1]]]);
//# sourceMappingURL=main.508353fd.chunk.js.map